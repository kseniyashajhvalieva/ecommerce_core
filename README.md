# Ядро интернет-магазина (Ecommerce Core)

Этот проект реализует ядро интернет-магазина на Python с использованием ООП-подхода.  
На данном этапе созданы основные сущности — товары и категории, с автоматическим учётом количества.

## Новые сущности

### Класс `Product` (Товар)
Класс для представления товара в магазине.

**Атрибуты:**
* `name` (str) — название товара
* `description` (str) — описание товара
* `price` (float) — цена товара
* `quantity` (int) — количество товара в наличии

**Пример создания:**
```
product = Product("Название", "Описание", 1000.0, 10)
```

### Класс `Category` (Категория)
Класс для представления категории товаров.

**Атрибуты:**
* `name` (str) — название категории
* `description` (str) — описание категории
* `products` (list) — список товаров (объектов класса `Product`)

**Атрибуты класса (общие для всех категорий):**
* `category_count` (int) — общее количество созданных категорий
* `product_count` (int) — общее количество товаров во всех категориях

**Автоматический подсчёт:**  
При создании новой категории `category_count` увеличивается на 1, а `product_count` — на количество товаров в этой
категории.

**Пример создания:**
```
category = Category("Категория", "Описание категории", [product1, product2])
```
### Расширенная функциональность
*   **Защищённые атрибуты:** Списки товаров в категориях (`Category.__products`) и цена товара (`Product.__price`) 
являются приватными.
*   **Контроль добавления:** Для добавления товара в категорию используется публичный метод `Category.add_product()`.
*   **Геттер для товаров:** Свойство `Category.products` возвращает форматированную строку для отображения всех товаров 
категории.
*   **Контроль цены:** Для цены реализованы геттер и сеттер (`Product.price`), которые запрещают установку нулевой или 
отрицательной стоимости.
*   **Фабричный метод:** Класс-метод `Product.new_product()` позволяет создавать экземпляры товаров из словаря с 
данными.

### Новые магические методы 

#### Класс `Product` (Товар)
Добавлены магические методы:

* **`__str__`** — возвращает строку вида:
```
Название продукта, X руб. Остаток: X шт.
```
* **`__add__`** — складывает два товара, возвращая общую стоимость всех единиц на складе:
```
product1 + product2 = (цена1 × количество1) + (цена2 × количество2)
```
#### Класс `Category` (Категория)
Добавлен магический метод:

* **`__str__`** — возвращает строку вида:
```
Название категории, количество продуктов: X шт.
```
Где `X` — суммарное количество всех товаров данной категории на складе.
## Структура проекта
```
ecommerce_core/
├── src/
│ ├── init.py
│ ├── category.py # класс Category
│ └── product.py # класс Product
├── tests/
│ ├── init.py
│ ├── test_category.py # тесты для Category
│ └── test_product.py # тесты для Product
├── main.py # точка входа для демонстрации
├── pyproject.toml # зависимости и настройки проекта
└── README.md
```
## Установка и запуск

1. **Установка зависимостей**  
   *Если используется Poetry:* 
```
poetry install
```
   *Если используется pip:*  
```
pip install -e .
```
2. Запуск основного скрипта:
```
poetry run python main.py # для Poetry
python main.py # для pip
```
3. Запуск тестов:
```
poetry run pytest # для Poetry
pytest # для pip
```
4. Проверка покрытия кода тестами:
```
poetry run pytest --cov=src --cov-report=html # для Poetry
pytest --cov=src --cov-report=html # для pip
```
Отчёт будет доступен в папке `htmlcov/index.html`.
